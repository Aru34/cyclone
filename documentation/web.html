<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cyclone.web — RequestHandler and Application classes &mdash; cyclone git-2013042301 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'git-2013042301',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="cyclone git-2013042301 documentation" href="index.html" />
    <link rel="up" title="Core web framework" href="webframework.html" />
    <link rel="next" title="cyclone.httpserver — Non-blocking HTTP server" href="httpserver.html" />
    <link rel="prev" title="Core web framework" href="webframework.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="httpserver.html" title="cyclone.httpserver — Non-blocking HTTP server"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="webframework.html" title="Core web framework"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">cyclone git-2013042301 documentation</a> &raquo;</li>
          <li><a href="webframework.html" accesskey="U">Core web framework</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-cyclone.web">
<span id="cyclone-web-requesthandler-and-application-classes"></span><h1><tt class="docutils literal"><span class="pre">cyclone.web</span></tt> &#8212; <tt class="docutils literal"><span class="pre">RequestHandler</span></tt> and <tt class="docutils literal"><span class="pre">Application</span></tt> classes<a class="headerlink" href="#module-cyclone.web" title="Permalink to this headline">¶</a></h1>
<p>The cyclone web framework looks a bit like web.py (<a class="reference external" href="http://webpy.org/">http://webpy.org/</a>) or
Google&#8217;s webapp (<a class="reference external" href="http://code.google.com/appengine/docs/python/tools/webapp/">http://code.google.com/appengine/docs/python/tools/webapp/</a>),
but with additional tools and optimizations to take advantage of the
non-blocking web server and tools.</p>
<p>Here is the canonical &#8220;Hello, world&#8221; example app:</p>
<div class="highlight-none"><div class="highlight"><pre>import cyclone.web
from twisted.internet import reactor

class MainHandler(cyclone.web.RequestHandler):
    def get(self):
        self.write(&quot;Hello, world&quot;)

if __name__ == &quot;__main__&quot;:
    application = cyclone.web.Application([
        (r&quot;/&quot;, MainHandler),
    ])
    reactor.listenTCP(8888, application)
    reactor.run()
</pre></div>
</div>
<p>See the cyclone walkthrough on <a class="reference external" href="http://cyclone.io">http://cyclone.io</a> for more details and a good
getting started guide.</p>
<div class="section" id="thread-safety-notes">
<h2>Thread-safety notes<a class="headerlink" href="#thread-safety-notes" title="Permalink to this headline">¶</a></h2>
<p>In general, methods on RequestHandler and elsewhere in cyclone are not
thread-safe.  In particular, methods such as write(), finish(), and
flush() must only be called from the main thread.  For more information on
using threads, please check the twisted documentation:
<a class="reference external" href="http://twistedmatrix.com/documents/current/core/howto/threading.html">http://twistedmatrix.com/documents/current/core/howto/threading.html</a></p>
</div>
<div class="section" id="request-handlers">
<h2>Request handlers<a class="headerlink" href="#request-handlers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cyclone.web.RequestHandler">
<em class="property">class </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">RequestHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Subclass this class and define get() or post() to make a handler.</p>
<p>If you want to support more methods than the standard GET/HEAD/POST, you
should override the class variable SUPPORTED_METHODS in your
RequestHandler class.</p>
<p>If you want lists to be serialized when calling self.write() set
serialize_lists to True.
This may have some security implications if you are not protecting against
XSRF with other means (such as a XSRF token).
More details on this vulnerability here:
<a class="reference external" href="http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx">http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx</a></p>
</dd></dl>

<div class="section" id="entry-points">
<h3>Entry points<a class="headerlink" href="#entry-points" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="cyclone.web.RequestHandler.initialize">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">initialize</tt><big>(</big><em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook for subclass initialization.</p>
<p>A dictionary passed as the third argument of a url spec will be
supplied as keyword arguments to initialize().</p>
<p>Example:</p>
<div class="highlight-none"><div class="highlight"><pre>class ProfileHandler(RequestHandler):
    def initialize(self, database):
        self.database = database

    def get(self, username):
        ...

app = Application([
    (r&#39;/user/(.*)&#39;, ProfileHandler, dict(database=database)),
    ])
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.prepare">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">prepare</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Called at the beginning of a request before <a class="reference internal" href="#cyclone.web.RequestHandler.get" title="cyclone.web.RequestHandler.get"><tt class="xref py py-obj docutils literal"><span class="pre">get</span></tt></a>/<a class="reference internal" href="#cyclone.web.RequestHandler.post" title="cyclone.web.RequestHandler.post"><tt class="xref py py-obj docutils literal"><span class="pre">post</span></tt></a>/etc.</p>
<p>Override this method to perform common initialization regardless
of the request method.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.on_finish">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">on_finish</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.on_finish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.on_finish" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after the end of a request.</p>
<p>Override this method to perform cleanup, logging, etc.
This method is a counterpart to <a class="reference internal" href="#cyclone.web.RequestHandler.prepare" title="cyclone.web.RequestHandler.prepare"><tt class="xref py py-obj docutils literal"><span class="pre">prepare</span></tt></a>.  <tt class="docutils literal"><span class="pre">on_finish</span></tt> may
not produce any output, as it is called after the response
has been sent to the client.</p>
</dd></dl>

<p>Implement any of the following methods to handle the corresponding
HTTP method.</p>
<dl class="method">
<dt id="cyclone.web.RequestHandler.get">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cyclone.web.RequestHandler.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.post">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">post</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cyclone.web.RequestHandler.post" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.put">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">put</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cyclone.web.RequestHandler.put" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.delete">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">delete</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cyclone.web.RequestHandler.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.head">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">head</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cyclone.web.RequestHandler.head" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.options">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">options</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cyclone.web.RequestHandler.options" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.default">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">default</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a request does not match any implemented methods.</p>
<p>Example:</p>
<div class="highlight-none"><div class="highlight"><pre>class ExampleHandler(RequestHandler):
    def get(self):
        self.write(&#39;That was a GET request!&#39;)

    def default(self):
        self.write(&#39;That was anything but a GET request!&#39;)
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="input">
<h3>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="cyclone.web.RequestHandler.get_argument">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_argument</tt><big>(</big><em>name</em>, <em>default=[]</em>, <em>strip=True</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_argument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value of the argument with the given name.</p>
<p>If default is not provided, the argument is considered to be
required, and we throw an HTTP 400 exception if it is missing.</p>
<p>If the argument appears in the url more than once, we return the
last value.</p>
<p>The returned value is always unicode.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_arguments">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_arguments</tt><big>(</big><em>name</em>, <em>strip=True</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_arguments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_arguments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of the arguments with the given name.</p>
<p>If the argument is not present, returns an empty list.</p>
<p>The returned values are always unicode.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.decode_argument">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">decode_argument</tt><big>(</big><em>value</em>, <em>name=None</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.decode_argument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.decode_argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Decodes an argument from the request.</p>
<p>The argument has been percent-decoded and is now a byte string.
By default, this method decodes the argument as utf-8 and returns
a unicode string, but this may be overridden in subclasses.</p>
<p>This method is used as a filter for both get_argument() and for
values extracted from the url and passed to get()/post()/etc.</p>
<p>The name of the argument is provided if known, but may be None
(e.g. for unnamed groups in the url regex).</p>
</dd></dl>

<dl class="attribute">
<dt id="cyclone.web.RequestHandler.request">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">request</tt><a class="headerlink" href="#cyclone.web.RequestHandler.request" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="httpserver.html#cyclone.httpserver.HTTPRequest" title="cyclone.httpserver.HTTPRequest"><tt class="xref py py-obj docutils literal"><span class="pre">cyclone.httpserver.HTTPRequest</span></tt></a> object containing additional
request parameters including e.g. headers and body data.</p>
</dd></dl>

<dl class="attribute">
<dt id="cyclone.web.RequestHandler.path_args">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">path_args</tt><a class="headerlink" href="#cyclone.web.RequestHandler.path_args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="cyclone.web.RequestHandler.path_kwargs">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">path_kwargs</tt><a class="headerlink" href="#cyclone.web.RequestHandler.path_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="docutils literal"><span class="pre">path_args</span></tt> and <tt class="docutils literal"><span class="pre">path_kwargs</span></tt> attributes contain the positional
and keyword arguments that are passed to the <a class="reference internal" href="#cyclone.web.RequestHandler.get" title="cyclone.web.RequestHandler.get"><tt class="xref py py-obj docutils literal"><span class="pre">get</span></tt></a>/<a class="reference internal" href="#cyclone.web.RequestHandler.post" title="cyclone.web.RequestHandler.post"><tt class="xref py py-obj docutils literal"><span class="pre">post</span></tt></a>/etc methods.
These attributes are set before those methods are called, so the values
are available during <a class="reference internal" href="#cyclone.web.RequestHandler.prepare" title="cyclone.web.RequestHandler.prepare"><tt class="xref py py-obj docutils literal"><span class="pre">prepare</span></tt></a>.</p>
</dd></dl>

</div>
<div class="section" id="output">
<h3>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<dl class="method">
<dt id="cyclone.web.RequestHandler.set_status">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">set_status</tt><big>(</big><em>status_code</em>, <em>reason=None</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.set_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.set_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the status code for our response.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>status_code</strong> (<em>int</em>) &#8211; Response status code. If <tt class="xref py py-obj docutils literal"><span class="pre">reason</span></tt> is <tt class="docutils literal"><span class="pre">None</span></tt>,
it must be present in <tt class="xref py py-obj docutils literal"><span class="pre">httplib.responses</span></tt>.</li>
<li><strong>reason</strong> (<em>string</em>) &#8211; Human-readable reason phrase describing the status
code. If <tt class="docutils literal"><span class="pre">None</span></tt>, it will be filled in from <tt class="xref py py-obj docutils literal"><span class="pre">httplib.responses</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.set_header">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">set_header</tt><big>(</big><em>name</em>, <em>value</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.set_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.set_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the given response header name and value.</p>
<p>If a datetime is given, we automatically format it according to the
HTTP specification. If the value is not a string, we convert it to
a string. All header values are then encoded as UTF-8.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.add_header">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">add_header</tt><big>(</big><em>name</em>, <em>value</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.add_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.add_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the given response header and value.</p>
<p>Unlike <a class="reference internal" href="#cyclone.web.RequestHandler.set_header" title="cyclone.web.RequestHandler.set_header"><tt class="xref py py-obj docutils literal"><span class="pre">set_header</span></tt></a>, <a class="reference internal" href="#cyclone.web.RequestHandler.add_header" title="cyclone.web.RequestHandler.add_header"><tt class="xref py py-obj docutils literal"><span class="pre">add_header</span></tt></a> may be called multiple times
to return multiple values for the same header.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.clear_header">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">clear_header</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.clear_header"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.clear_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears an outgoing header, undoing a previous <a class="reference internal" href="#cyclone.web.RequestHandler.set_header" title="cyclone.web.RequestHandler.set_header"><tt class="xref py py-obj docutils literal"><span class="pre">set_header</span></tt></a> call.</p>
<p>Note that this method does not apply to multi-valued headers
set by <a class="reference internal" href="#cyclone.web.RequestHandler.add_header" title="cyclone.web.RequestHandler.add_header"><tt class="xref py py-obj docutils literal"><span class="pre">add_header</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.set_default_headers">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">set_default_headers</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.set_default_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.set_default_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this to set HTTP headers at the beginning of the request.</p>
<p>For example, this is the place to set a custom <tt class="docutils literal"><span class="pre">Server</span></tt> header.
Note that setting such headers in the normal flow of request
processing may not do what you want, since headers may be reset
during error handling.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.write">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">write</tt><big>(</big><em>chunk</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the given chunk to the output buffer.</p>
<p>To write the output to the network, use the flush() method below.</p>
<p>If the given chunk is a dictionary, we write it as JSON and set
the Content-Type of the response to be application/json.
(if you want to send JSON as a different Content-Type, call
set_header <em>after</em> calling write()).</p>
<p>Note that lists are not converted to JSON because of a potential
cross-site security vulnerability.  All JSON output should be
wrapped in a dictionary.  More details at
<a class="reference external" href="http://haacked.com/archive/2008/11/20/">http://haacked.com/archive/2008/11/20/</a>            anatomy-of-a-subtle-json-vulnerability.aspx</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.flush">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">flush</tt><big>(</big><em>include_footers=False</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.flush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flushes the current output buffer to the network.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.finish">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">finish</tt><big>(</big><em>chunk=None</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.finish"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.finish" title="Permalink to this definition">¶</a></dt>
<dd><p>Finishes this response, ending the HTTP request.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.render">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">render</tt><big>(</big><em>template_name</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.render"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders the template with the given arguments as the response.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.render_string">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">render_string</tt><big>(</big><em>template_name</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.render_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.render_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the given template with the given arguments.</p>
<p>We return the generated string. To generate and write a template
as a response, use render() above.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_template_namespace">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_template_namespace</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_template_namespace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_template_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary to be used as the default template namespace.</p>
<p>May be overridden by subclasses to add or modify values.</p>
<p>The results of this method will be combined with additional
defaults in the <tt class="xref py py-obj docutils literal"><span class="pre">tornado.template</span></tt> module and keyword arguments
to <a class="reference internal" href="#cyclone.web.RequestHandler.render" title="cyclone.web.RequestHandler.render"><tt class="xref py py-obj docutils literal"><span class="pre">render</span></tt></a> or <a class="reference internal" href="#cyclone.web.RequestHandler.render_string" title="cyclone.web.RequestHandler.render_string"><tt class="xref py py-obj docutils literal"><span class="pre">render_string</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.redirect">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">redirect</tt><big>(</big><em>url</em>, <em>permanent=False</em>, <em>status=None</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.redirect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.redirect" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a redirect to the given (optionally relative) URL.</p>
<p>If the <tt class="docutils literal"><span class="pre">status</span></tt> argument is specified, that value is used as the
HTTP status code; otherwise either 301 (permanent) or 302
(temporary) is chosen based on the <tt class="docutils literal"><span class="pre">permanent</span></tt> argument.
The default is 302 (temporary).</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.send_error">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">send_error</tt><big>(</big><em>status_code=500</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.send_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.send_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends the given HTTP error code to the browser.</p>
<p>If <a class="reference internal" href="#cyclone.web.RequestHandler.flush" title="cyclone.web.RequestHandler.flush"><tt class="xref py py-obj docutils literal"><span class="pre">flush()</span></tt></a> has already been called, it is not possible to send
an error, so this method will simply terminate the response.
If output has been written but not yet flushed, it will be discarded
and replaced with the error page.</p>
<p>Override <a class="reference internal" href="#cyclone.web.RequestHandler.write_error" title="cyclone.web.RequestHandler.write_error"><tt class="xref py py-obj docutils literal"><span class="pre">write_error()</span></tt></a> to customize the error page that is returned.
Additional keyword arguments are passed through to <a class="reference internal" href="#cyclone.web.RequestHandler.write_error" title="cyclone.web.RequestHandler.write_error"><tt class="xref py py-obj docutils literal"><span class="pre">write_error</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.write_error">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">write_error</tt><big>(</big><em>status_code</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.write_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.write_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to implement custom error pages.</p>
<p><tt class="docutils literal"><span class="pre">write_error</span></tt> may call <a class="reference internal" href="#cyclone.web.RequestHandler.write" title="cyclone.web.RequestHandler.write"><tt class="xref py py-obj docutils literal"><span class="pre">write</span></tt></a>, <a class="reference internal" href="#cyclone.web.RequestHandler.render" title="cyclone.web.RequestHandler.render"><tt class="xref py py-obj docutils literal"><span class="pre">render</span></tt></a>, <a class="reference internal" href="#cyclone.web.RequestHandler.set_header" title="cyclone.web.RequestHandler.set_header"><tt class="xref py py-obj docutils literal"><span class="pre">set_header</span></tt></a>, etc
to produce output as usual.</p>
<p>If this error was caused by an uncaught exception (including
HTTPError), an <tt class="docutils literal"><span class="pre">exc_info</span></tt> triple will be available as
<tt class="docutils literal"><span class="pre">kwargs[&quot;exc_info&quot;]</span></tt>.  Note that this exception may not be
the &#8220;current&#8221; exception for purposes of methods like
<tt class="docutils literal"><span class="pre">sys.exc_info()</span></tt> or <tt class="docutils literal"><span class="pre">traceback.format_exc</span></tt>.</p>
<p>For historical reasons, if a method <tt class="docutils literal"><span class="pre">get_error_html</span></tt> exists,
it will be used instead of the default <tt class="docutils literal"><span class="pre">write_error</span></tt> implementation.
<tt class="docutils literal"><span class="pre">get_error_html</span></tt> returned a string instead of producing output
normally, and had different semantics for exception handling.
Users of <tt class="docutils literal"><span class="pre">get_error_html</span></tt> are encouraged to convert their code
to override <tt class="docutils literal"><span class="pre">write_error</span></tt> instead.</p>
<p>In order for error pages to be generated for paths that do not match any
handlers, you can use the <tt class="xref py py-obj docutils literal"><span class="pre">error_handler</span></tt> keyword argument when
instantiating the <tt class="docutils literal"><span class="pre">cyclone.web.Application</span></tt> object.</p>
<p>For example:</p>
<div class="highlight-none"><div class="highlight"><pre>import cyclone.web
import httplib

class CustomErrorPageMixin(object):
    def write_error(self, status_code, **kwargs):
        kwargs[&quot;code&quot;] = status_code
        if &#39;message&#39; not in kwargs:
            kwargs[&quot;message&quot;] = httplib.responses[status_code]

        try:
            self.render(&quot;error_%d.html&quot; % status_code,
                    fields=kwargs)
        except IOError:
            self.render(&quot;error_all.html&quot;, fields=kwargs)

class CustomErrorHandler(CustomErrorPageMixin,
        cyclone.web.ErrorHandler):
    pass

class BaseHandler(CustomErrorPageMixin, cyclone.web.RequestHandler):
    ...
</pre></div>
</div>
<p>Then, when constructing the <tt class="docutils literal"><span class="pre">cyclone.web.Application</span></tt> object:</p>
<div class="highlight-none"><div class="highlight"><pre>from cyclone import web
application = web.Application([
    (r&quot;/&quot;, MainPageHandler),
], error_handler=CustomErrorHandler)
</pre></div>
</div>
<p>This technique is also compatible with Bottle-style applications:</p>
<div class="highlight-none"><div class="highlight"><pre>from cyclone.bottle import create_app
# create_app takes the same arguments as run
application = create_app(base_handler=BaseHandler,
    error_handler=CustomErrorHandler)
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.clear">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">clear</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets all headers and content for this response.</p>
</dd></dl>

</div>
<div class="section" id="cookies">
<h3>Cookies<a class="headerlink" href="#cookies" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="cyclone.web.RequestHandler.cookies">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">cookies</tt><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.cookies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.cookies" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_cookie">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_cookie</tt><big>(</big><em>name</em>, <em>default=None</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of the cookie with the given name, else default.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.set_cookie">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">set_cookie</tt><big>(</big><em>name</em>, <em>value</em>, <em>domain=None</em>, <em>expires=None</em>, <em>path='/'</em>, <em>expires_days=None</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.set_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.set_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the given cookie name/value with the given options.</p>
<p>Additional keyword arguments are set on the Cookie.Morsel directly.
See <a class="reference external" href="http://docs.python.org/library/cookie.html#morsel-objects">http://docs.python.org/library/cookie.html#morsel-objects</a>
for available attributes.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.clear_cookie">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">clear_cookie</tt><big>(</big><em>name</em>, <em>path='/'</em>, <em>domain=None</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.clear_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.clear_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes the cookie with the given name.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.clear_all_cookies">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">clear_all_cookies</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.clear_all_cookies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.clear_all_cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all the cookies the user sent with this request.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_secure_cookie">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_secure_cookie</tt><big>(</big><em>name</em>, <em>value=None</em>, <em>max_age_days=31</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_secure_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_secure_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the given signed cookie if it validates, or None.</p>
<p>The decoded cookie value is returned as a byte string (unlike
<a class="reference internal" href="#cyclone.web.RequestHandler.get_cookie" title="cyclone.web.RequestHandler.get_cookie"><tt class="xref py py-obj docutils literal"><span class="pre">get_cookie</span></tt></a>).</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.set_secure_cookie">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">set_secure_cookie</tt><big>(</big><em>name</em>, <em>value</em>, <em>expires_days=30</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.set_secure_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.set_secure_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Signs and timestamps a cookie so it cannot be forged.</p>
<p>You must specify the <tt class="docutils literal"><span class="pre">cookie_secret</span></tt> setting in your Application
to use this method. It should be a long, random sequence of bytes
to be used as the HMAC secret for the signature.</p>
<p>To read a cookie set with this method, use <a class="reference internal" href="#cyclone.web.RequestHandler.get_secure_cookie" title="cyclone.web.RequestHandler.get_secure_cookie"><tt class="xref py py-obj docutils literal"><span class="pre">get_secure_cookie()</span></tt></a>.</p>
<p>Note that the <tt class="docutils literal"><span class="pre">expires_days</span></tt> parameter sets the lifetime of the
cookie in the browser, but is independent of the <tt class="docutils literal"><span class="pre">max_age_days</span></tt>
parameter to <a class="reference internal" href="#cyclone.web.RequestHandler.get_secure_cookie" title="cyclone.web.RequestHandler.get_secure_cookie"><tt class="xref py py-obj docutils literal"><span class="pre">get_secure_cookie</span></tt></a>.</p>
<p>Secure cookies may contain arbitrary byte values, not just unicode
strings (unlike regular cookies)</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.create_signed_value">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">create_signed_value</tt><big>(</big><em>name</em>, <em>value</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.create_signed_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.create_signed_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Signs and timestamps a string so it cannot be forged.</p>
<p>Normally used via set_secure_cookie, but provided as a separate
method for non-cookie uses.  To decode a value not stored
as a cookie use the optional value argument to get_secure_cookie.</p>
</dd></dl>

</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="cyclone.web.RequestHandler.application">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">application</tt><a class="headerlink" href="#cyclone.web.RequestHandler.application" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#cyclone.web.Application" title="cyclone.web.Application"><tt class="xref py py-obj docutils literal"><span class="pre">Application</span></tt></a> object serving this request</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.async_callback">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">async_callback</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.async_callback"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.async_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Obsolete - catches exceptions from the wrapped function.</p>
<p>This function is unnecessary since Tornado 1.1.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.check_xsrf_cookie">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">check_xsrf_cookie</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.check_xsrf_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.check_xsrf_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies that the &#8216;_xsrf&#8217; cookie matches the &#8216;_xsrf&#8217; argument.</p>
<p>To prevent cross-site request forgery, we set an &#8216;_xsrf&#8217;
cookie and include the same value as a non-cookie
field with all POST requests. If the two do not match, we
reject the form submission as a potential forgery.</p>
<p>The _xsrf value may be set as either a form field named _xsrf
or in a custom HTTP header named X-XSRFToken or X-CSRFToken
(the latter is accepted for compatibility with Django).</p>
<p>See <a class="reference external" href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">http://en.wikipedia.org/wiki/Cross-site_request_forgery</a></p>
<p>Prior to release 1.1.1, this check was ignored if the HTTP header
&#8220;X-Requested-With: XMLHTTPRequest&#8221; was present.  This exception
has been shown to be insecure and has been removed.  For more
information please see
<a class="reference external" href="http://www.djangoproject.com/weblog/2011/feb/08/security/">http://www.djangoproject.com/weblog/2011/feb/08/security/</a>
<a class="reference external" href="http://weblog.rubyonrails.org/2011/2/8/">http://weblog.rubyonrails.org/2011/2/8/</a>            csrf-protection-bypass-in-ruby-on-rails</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.compute_etag">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">compute_etag</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.compute_etag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.compute_etag" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the etag header to be used for this request.</p>
<p>May be overridden to provide custom etag implementations,
or may return None to disable cyclone&#8217;s default etag support.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.create_template_loader">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">create_template_loader</tt><big>(</big><em>template_path</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.create_template_loader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.create_template_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new template loader for the given path.</p>
<p>May be overridden by subclasses.  By default returns a
directory-based loader on the given path, using the
<tt class="docutils literal"><span class="pre">autoescape</span></tt> application setting.  If a <tt class="docutils literal"><span class="pre">template_loader</span></tt>
application setting is supplied, uses that instead.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_browser_locale">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_browser_locale</tt><big>(</big><em>default='en_US'</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_browser_locale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_browser_locale" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the user&#8217;s locale from Accept-Language header.</p>
<p>See <a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4</a></p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_current_user">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_current_user</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_current_user"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_current_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to determine the current user from, e.g., a cookie.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_login_url">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_login_url</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_login_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_login_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to customize the login URL based on the request.</p>
<p>By default, we use the &#8216;login_url&#8217; application setting.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_status">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_status</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the status code for our response.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_template_path">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_template_path</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_template_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_template_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to customize template path for each handler.</p>
<p>By default, we use the &#8216;template_path&#8217; application setting.
Return None to load templates relative to the calling file.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.get_user_locale">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">get_user_locale</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.get_user_locale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.get_user_locale" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to determine the locale from the authenticated user.</p>
<p>If None is returned, we fall back to get_browser_locale().</p>
<p>This method should return a cyclone.locale.Locale object,
most likely obtained via a call like cyclone.locale.get(&#8220;en&#8221;)</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.on_connection_close">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">on_connection_close</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.on_connection_close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.on_connection_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Called in async handlers if the client closed the connection.</p>
<p>Override this to clean up resources associated with
long-lived connections.  Note that this method is called only if
the connection was closed during asynchronous processing; if you
need to do cleanup after every request override <a class="reference internal" href="#cyclone.web.RequestHandler.on_finish" title="cyclone.web.RequestHandler.on_finish"><tt class="xref py py-obj docutils literal"><span class="pre">on_finish</span></tt></a>
instead.</p>
<p>Proxies may keep a connection open for a time (perhaps
indefinitely) after the client has gone away, so this method
may not be called promptly after the end user closes their
connection.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.require_setting">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">require_setting</tt><big>(</big><em>name</em>, <em>feature='this feature'</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.require_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.require_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises an exception if the given app setting is not defined.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.reverse_url">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">reverse_url</tt><big>(</big><em>name</em>, <em>*args</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.reverse_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.reverse_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for <a class="reference internal" href="#cyclone.web.Application.reverse_url" title="cyclone.web.Application.reverse_url"><tt class="xref py py-obj docutils literal"><span class="pre">Application.reverse_url</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cyclone.web.RequestHandler.settings">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">settings</tt><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.settings" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias for <tt class="xref py py-obj docutils literal"><span class="pre">self.application.settings</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.static_url">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">static_url</tt><big>(</big><em>path</em>, <em>include_host=None</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.static_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.static_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a static URL for the given relative static file path.</p>
<p>This method requires you set the &#8216;static_path&#8217; setting in your
application (which specifies the root directory of your static
files).</p>
<p>We append ?v=&lt;signature&gt; to the returned URL, which makes our
static file handler set an infinite expiration header on the
returned content. The signature is based on the content of the
file.</p>
<p>By default this method returns URLs relative to the current
host, but if <tt class="docutils literal"><span class="pre">include_host</span></tt> is true the URL returned will be
absolute.  If this handler has an <tt class="docutils literal"><span class="pre">include_host</span></tt> attribute,
that value will be used as the default for all <a class="reference internal" href="#cyclone.web.RequestHandler.static_url" title="cyclone.web.RequestHandler.static_url"><tt class="xref py py-obj docutils literal"><span class="pre">static_url</span></tt></a>
calls that do not pass <tt class="docutils literal"><span class="pre">include_host</span></tt> as a keyword argument.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.RequestHandler.xsrf_form_html">
<tt class="descclassname">RequestHandler.</tt><tt class="descname">xsrf_form_html</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RequestHandler.xsrf_form_html"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RequestHandler.xsrf_form_html" title="Permalink to this definition">¶</a></dt>
<dd><p>An HTML &lt;input/&gt; element to be included with all POST forms.</p>
<p>It defines the _xsrf input value, which we check on all POST
requests to prevent cross-site request forgery. If you have set
the &#8216;xsrf_cookies&#8217; application setting, you must include this
HTML within all of your HTML forms.</p>
<p>See check_xsrf_cookie() above for more information.</p>
</dd></dl>

</div>
</div>
<div class="section" id="application-configuration">
<h2>Application configuration<a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="cyclone.web.Application">
<em class="property">class </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">Application</tt><big>(</big><em>handlers=None</em>, <em>default_host=''</em>, <em>transforms=None</em>, <em>error_handler=None</em>, <em>**settings</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#Application"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>A collection of request handlers that make up a web application.</p>
<p>Instances of this class are callable and can be passed directly to
HTTPServer to serve the application:</p>
<div class="highlight-none"><div class="highlight"><pre>application = web.Application([
    (r&quot;/&quot;, MainPageHandler),
])
reactor.listenTCP(8888, application)
reactor.run()
</pre></div>
</div>
<p>The constructor for this class takes in a list of URLSpec objects
or (regexp, request_class) tuples. When we receive requests, we
iterate over the list in order and instantiate an instance of the
first request class whose regexp matches the request path.</p>
<p>Each tuple can contain an optional third element, which should be a
dictionary if it is present. That dictionary is passed as keyword
arguments to the contructor of the handler. This pattern is used
for the StaticFileHandler below (note that a StaticFileHandler
can be installed automatically with the static_path setting described
below):</p>
<div class="highlight-none"><div class="highlight"><pre>application = web.Application([
    (r&quot;/static/(.*)&quot;, web.StaticFileHandler, {&quot;path&quot;: &quot;/var/www&quot;}),
])
</pre></div>
</div>
<p>We support virtual hosts with the add_handlers method, which takes in
a host regular expression as the first argument:</p>
<div class="highlight-none"><div class="highlight"><pre>application.add_handlers(r&quot;www\.myhost\.com&quot;, [
    (r&quot;/article/([0-9]+)&quot;, ArticleHandler),
])
</pre></div>
</div>
<p>You can serve static files by sending the static_path setting as a
keyword argument. We will serve those files from the /static/ URI
(this is configurable with the static_url_prefix setting),
and we will serve /favicon.ico and /robots.txt from the same directory.
A custom subclass of StaticFileHandler can be specified with the
static_handler_class setting.</p>
<p>It is also possible to customize the error pages the application generates
in case it does not find any handler for the incoming request by using the
<tt class="xref py py-obj docutils literal"><span class="pre">error_handler</span></tt> keyword argument. This allows for consistent error pages
across the application.</p>
<dl class="attribute">
<dt id="cyclone.web.Application.settings">
<tt class="descname">settings</tt><a class="headerlink" href="#cyclone.web.Application.settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Additonal keyword arguments passed to the constructor are saved in the
<a class="reference internal" href="#cyclone.web.Application.settings" title="cyclone.web.Application.settings"><tt class="xref py py-obj docutils literal"><span class="pre">settings</span></tt></a> dictionary, and are often referred to in documentation as
&#8220;application settings&#8221;.</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">settings</tt></dt>
<dd><p>Additional keyword arguments passed to the constructor are
saved in the <a class="reference internal" href="#cyclone.web.Application.settings" title="cyclone.web.Application.settings"><tt class="xref py py-obj docutils literal"><span class="pre">settings</span></tt></a> dictionary, and are often referred to
in documentation as &#8220;application settings&#8221;.  Settings are
used to customize various aspects of Cyclone (although in
some cases richer customization is possible by overriding
methods in a subclass of <a class="reference internal" href="#cyclone.web.RequestHandler" title="cyclone.web.RequestHandler"><tt class="xref py py-obj docutils literal"><span class="pre">RequestHandler</span></tt></a>).  Some
applications also like to use the <a class="reference internal" href="#cyclone.web.Application.settings" title="cyclone.web.Application.settings"><tt class="xref py py-obj docutils literal"><span class="pre">settings</span></tt></a> dictionary as a
way to make application-specific settings available to
handlers without using global variables.  Settings used in
Cyclone are described below.</p>
<p>General settings:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">debug</span></tt>: If <tt class="docutils literal"><span class="pre">True</span></tt> the application runs in debug mode,
described in <a class="reference internal" href="overview.html#debug-mode"><em>Debug mode and automatic reloading</em></a>.</li>
<li><tt class="docutils literal"><span class="pre">xheaders</span></tt>: If <tt class="docutils literal"><span class="pre">True</span></tt> the application uses <tt class="docutils literal"><span class="pre">X-Real-IP</span></tt>
and <tt class="docutils literal"><span class="pre">X-Forwarded-For</span></tt> HTTP headers. Use this when your server
is reverse proxied by Nginx.</li>
<li><tt class="docutils literal"><span class="pre">gzip</span></tt>: If <tt class="docutils literal"><span class="pre">True</span></tt>, responses in textual formats will be
gzipped automatically.</li>
<li><tt class="docutils literal"><span class="pre">log_function</span></tt>: This function will be called at the end
of every request to log the result (with one argument, the
<a class="reference internal" href="#cyclone.web.RequestHandler" title="cyclone.web.RequestHandler"><tt class="xref py py-obj docutils literal"><span class="pre">RequestHandler</span></tt></a> object).  The default implementation
writes to the <tt class="xref py py-obj docutils literal"><span class="pre">logging</span></tt> module&#8217;s root logger.  May also be
customized by overriding <a class="reference internal" href="#cyclone.web.Application.log_request" title="cyclone.web.Application.log_request"><tt class="xref py py-obj docutils literal"><span class="pre">Application.log_request</span></tt></a>.</li>
<li><tt class="docutils literal"><span class="pre">ui_modules</span></tt> and <tt class="docutils literal"><span class="pre">ui_methods</span></tt>: May be set to a mapping
of <a class="reference internal" href="#cyclone.web.UIModule" title="cyclone.web.UIModule"><tt class="xref py py-obj docutils literal"><span class="pre">UIModule</span></tt></a> or UI methods to be made available to templates.
May be set to a module, dictionary, or a list of modules
and/or dicts.  See <a class="reference internal" href="overview.html#ui-modules"><em>UI modules</em></a> for more details.</li>
</ul>
<p>Authentication and security settings:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">cookie_secret</span></tt>: Used by <a class="reference internal" href="#cyclone.web.RequestHandler.get_secure_cookie" title="cyclone.web.RequestHandler.get_secure_cookie"><tt class="xref py py-obj docutils literal"><span class="pre">RequestHandler.get_secure_cookie</span></tt></a>
and <tt class="xref py py-obj docutils literal"><span class="pre">set_secure_cookie</span></tt> to sign cookies.</li>
<li><tt class="docutils literal"><span class="pre">login_url</span></tt>: The <a class="reference internal" href="#cyclone.web.authenticated" title="cyclone.web.authenticated"><tt class="xref py py-obj docutils literal"><span class="pre">authenticated</span></tt></a> decorator will redirect
to this url if the user is not logged in.  Can be further
customized by overriding <a class="reference internal" href="#cyclone.web.RequestHandler.get_login_url" title="cyclone.web.RequestHandler.get_login_url"><tt class="xref py py-obj docutils literal"><span class="pre">RequestHandler.get_login_url</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">xsrf_cookies</span></tt>: If true, <a class="reference internal" href="overview.html#xsrf"><em>Cross-site request forgery protection</em></a> will be enabled.</li>
<li><tt class="docutils literal"><span class="pre">twitter_consumer_key</span></tt>, <tt class="docutils literal"><span class="pre">twitter_consumer_secret</span></tt>,
<tt class="docutils literal"><span class="pre">friendfeed_consumer_key</span></tt>, <tt class="docutils literal"><span class="pre">friendfeed_consumer_secret</span></tt>,
<tt class="docutils literal"><span class="pre">google_consumer_key</span></tt>, <tt class="docutils literal"><span class="pre">google_consumer_secret</span></tt>,
<tt class="docutils literal"><span class="pre">facebook_api_key</span></tt>, <tt class="docutils literal"><span class="pre">facebook_secret</span></tt>:  Used in the
<a class="reference internal" href="auth.html#module-cyclone.auth" title="cyclone.auth"><tt class="xref py py-obj docutils literal"><span class="pre">cyclone.auth</span></tt></a> module to authenticate to various APIs.</li>
</ul>
<p>Template settings:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">autoescape</span></tt>: Controls automatic escaping for templates.
May be set to <tt class="docutils literal"><span class="pre">None</span></tt> to disable escaping, or to the <em>name</em>
of a function that all output should be passed through.
Defaults to <tt class="docutils literal"><span class="pre">&quot;xhtml_escape&quot;</span></tt>.  Can be changed on a per-template
basis with the <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">autoescape</span> <span class="pre">%}</span></tt> directive.</li>
<li><tt class="docutils literal"><span class="pre">template_path</span></tt>: Directory containing template files.  Can be
further customized by overriding <a class="reference internal" href="#cyclone.web.RequestHandler.get_template_path" title="cyclone.web.RequestHandler.get_template_path"><tt class="xref py py-obj docutils literal"><span class="pre">RequestHandler.get_template_path</span></tt></a></li>
<li><tt class="docutils literal"><span class="pre">template_loader</span></tt>: Assign to an instance of
<a class="reference internal" href="template.html#cyclone.template.BaseLoader" title="cyclone.template.BaseLoader"><tt class="xref py py-obj docutils literal"><span class="pre">cyclone.template.BaseLoader</span></tt></a> to customize template loading.
If this setting is used the <tt class="docutils literal"><span class="pre">template_path</span></tt> and <tt class="docutils literal"><span class="pre">autoescape</span></tt>
settings are ignored.  Can be further customized by overriding
<a class="reference internal" href="#cyclone.web.RequestHandler.create_template_loader" title="cyclone.web.RequestHandler.create_template_loader"><tt class="xref py py-obj docutils literal"><span class="pre">RequestHandler.create_template_loader</span></tt></a>.</li>
</ul>
<p>Static file settings:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">static_path</span></tt>: Directory from which static files will be
served.</li>
<li><tt class="docutils literal"><span class="pre">static_url_prefix</span></tt>:  Url prefix for static files,
defaults to <tt class="docutils literal"><span class="pre">&quot;/static/&quot;</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">static_handler_class</span></tt>, <tt class="docutils literal"><span class="pre">static_handler_args</span></tt>: May be set to
use a different handler for static files instead of the default
<a class="reference internal" href="#cyclone.web.StaticFileHandler" title="cyclone.web.StaticFileHandler"><tt class="xref py py-obj docutils literal"><span class="pre">cyclone.web.StaticFileHandler</span></tt></a>.  <tt class="docutils literal"><span class="pre">static_handler_args</span></tt>, if set,
should be a dictionary of keyword arguments to be passed to the
handler&#8217;s <tt class="docutils literal"><span class="pre">initialize</span></tt> method.</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="cyclone.web.Application.protocol">
<tt class="descname">protocol</tt><a class="headerlink" href="#cyclone.web.Application.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">HTTPConnection</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.Application.add_handlers">
<tt class="descname">add_handlers</tt><big>(</big><em>host_pattern</em>, <em>host_handlers</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#Application.add_handlers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.Application.add_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends the given handlers to our handler list.</p>
<p>Host patterns are processed sequentially in the order they were
added. All matching patterns will be considered.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.Application.add_transform">
<tt class="descname">add_transform</tt><big>(</big><em>transform_class</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#Application.add_transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.Application.add_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the given OutputTransform to our transform list.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.Application.reverse_url">
<tt class="descname">reverse_url</tt><big>(</big><em>name</em>, <em>*args</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#Application.reverse_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.Application.reverse_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a URL path for handler named <tt class="xref py py-obj docutils literal"><span class="pre">name</span></tt></p>
<p>The handler must be added to the application as a named URLSpec.</p>
<p>Args will be substituted for capturing groups in the URLSpec regex.
They will be converted to strings if necessary, encoded as utf8,
and url-escaped.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.Application.log_request">
<tt class="descname">log_request</tt><big>(</big><em>handler</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#Application.log_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.Application.log_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a completed HTTP request to the logs.</p>
<p>By default writes to the python root logger.  To change
this behavior either subclass Application and override this method,
or pass a function in the application settings dictionary as
&#8216;log_function&#8217;.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cyclone.web.URLSpec">
<em class="property">class </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">URLSpec</tt><big>(</big><em>pattern</em>, <em>handler_class</em>, <em>kwargs=None</em>, <em>name=None</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#URLSpec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.URLSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies mappings between URLs and handlers.</p>
<p>Creates a URLSpec.</p>
<p>Parameters:</p>
<dl class="docutils">
<dt>pattern: Regular expression to be matched.  Any groups in the regex</dt>
<dd>will be passed in to the handler&#8217;s get/post/etc methods as
arguments.</dd>
</dl>
<p>handler_class: RequestHandler subclass to be invoked.</p>
<dl class="docutils">
<dt>kwargs (optional): A dictionary of additional arguments to be passed</dt>
<dd>to the handler&#8217;s constructor.</dd>
<dt>name (optional): A name for this handler.  Used by</dt>
<dd>Application.reverse_url.</dd>
</dl>
<p>The <tt class="docutils literal"><span class="pre">URLSpec</span></tt> class is also available under the name <tt class="docutils literal"><span class="pre">cyclone.web.url</span></tt>.</p>
</dd></dl>

</div>
<div class="section" id="decorators">
<h2>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="cyclone.web.asynchronous">
<tt class="descclassname">cyclone.web.</tt><tt class="descname">asynchronous</tt><big>(</big><em>method</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#asynchronous"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.asynchronous" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap request handler methods with this if they are asynchronous.</p>
<p>If this decorator is given, the response is not finished when the
method returns. It is up to the request handler to call self.finish()
to terminate the HTTP request. Without this decorator, the request is
automatically finished when the get() or post() method returns.</p>
<div class="highlight-none"><div class="highlight"><pre>from twisted.internet import reactor

class MyRequestHandler(web.RequestHandler):
    @web.asynchronous
    def get(self):
        self.write(&quot;Processing your request...&quot;)
        reactor.callLater(5, self.do_something)

    def do_something(self):
        self.finish(&quot;done!&quot;)
</pre></div>
</div>
<p>It may be used for Comet and similar push techniques.
<a class="reference external" href="http://en.wikipedia.org/wiki/Comet_(programming">http://en.wikipedia.org/wiki/Comet_(programming</a>)</p>
</dd></dl>

<dl class="function">
<dt id="cyclone.web.authenticated">
<tt class="descclassname">cyclone.web.</tt><tt class="descname">authenticated</tt><big>(</big><em>method</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#authenticated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.authenticated" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorate methods with this to require that the user be logged in.</p>
</dd></dl>

<dl class="function">
<dt id="cyclone.web.addslash">
<tt class="descclassname">cyclone.web.</tt><tt class="descname">addslash</tt><big>(</big><em>method</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#addslash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.addslash" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to add a missing trailing slash to the request path.</p>
<p>For example, a request to &#8216;/foo&#8217; would redirect to &#8216;/foo/&#8217; with this
decorator. Your request handler mapping should use a regular expression
like r&#8217;/foo/?&#8217; in conjunction with using the decorator.</p>
</dd></dl>

<dl class="function">
<dt id="cyclone.web.removeslash">
<tt class="descclassname">cyclone.web.</tt><tt class="descname">removeslash</tt><big>(</big><em>method</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#removeslash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.removeslash" title="Permalink to this definition">¶</a></dt>
<dd><p>Use this decorator to remove trailing slashes from the request path.</p>
<p>For example, a request to <tt class="docutils literal"><span class="pre">'/foo/'</span></tt> would redirect to <tt class="docutils literal"><span class="pre">'/foo'</span></tt> with
this decorator. Your request handler mapping should use a regular
expression like <tt class="docutils literal"><span class="pre">r'/foo/*'</span></tt> in conjunction with using the decorator.</p>
</dd></dl>

</div>
<div class="section" id="everything-else">
<h2>Everything else<a class="headerlink" href="#everything-else" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="cyclone.web.HTTPError">
<em class="property">exception </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">HTTPError</tt><big>(</big><em>status_code</em>, <em>log_message=None</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#HTTPError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.HTTPError" title="Permalink to this definition">¶</a></dt>
<dd><p>An exception that will turn into an HTTP error response.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>status_code</strong> (<em>int</em>) &#8211; HTTP status code.  Must be listed in
<tt class="xref py py-obj docutils literal"><span class="pre">httplib.responses</span></tt> unless the <tt class="docutils literal"><span class="pre">reason</span></tt> keyword argument is given.</li>
<li><strong>log_message</strong> (<em>string</em>) &#8211; Message to be written to the log for this error
(will not be shown to the user unless the <a class="reference internal" href="#cyclone.web.Application" title="cyclone.web.Application"><tt class="xref py py-obj docutils literal"><span class="pre">Application</span></tt></a> is in debug
mode).  May contain <tt class="docutils literal"><span class="pre">%s</span></tt>-style placeholders, which will be filled
in with remaining positional parameters.</li>
<li><strong>reason</strong> (<em>string</em>) &#8211; Keyword-only argument.  The HTTP &#8220;reason&#8221; phrase
to pass in the status line along with <tt class="docutils literal"><span class="pre">status_code</span></tt>.  Normally
determined automatically from <tt class="docutils literal"><span class="pre">status_code</span></tt>, but can be used
to use a non-standard numeric code.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="cyclone.web.HTTPAuthenticationRequired">
<em class="property">exception </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">HTTPAuthenticationRequired</tt><big>(</big><em>log_message=None</em>, <em>auth_type='Basic'</em>, <em>realm='Restricted Access'</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#HTTPAuthenticationRequired"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.HTTPAuthenticationRequired" title="Permalink to this definition">¶</a></dt>
<dd><p>An exception that will turn into an HTTP 401, Authentication Required.</p>
<p>The arguments are used to compose the <tt class="docutils literal"><span class="pre">WWW-Authenticate</span></tt> header.
See <a class="reference external" href="http://en.wikipedia.org/wiki/Basic_access_authentication">http://en.wikipedia.org/wiki/Basic_access_authentication</a> for details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>auth_type</strong> (<em>string</em>) &#8211; Authentication type (<tt class="docutils literal"><span class="pre">Basic</span></tt>, <tt class="docutils literal"><span class="pre">Digest</span></tt>, etc)</li>
<li><strong>realm</strong> (<em>string</em>) &#8211; Realm (Usually displayed by the browser)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="cyclone.web.UIModule">
<em class="property">class </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">UIModule</tt><big>(</big><em>handler</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule" title="Permalink to this definition">¶</a></dt>
<dd><p>A UI re-usable, modular unit on a page.</p>
<p>UI modules often execute additional queries, and they can include
additional CSS and JavaScript that will be included in the output
page, which is automatically inserted on page render.</p>
<dl class="method">
<dt id="cyclone.web.UIModule.render">
<tt class="descname">render</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule.render"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Overridden in subclasses to return this module&#8217;s output.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.UIModule.embedded_javascript">
<tt class="descname">embedded_javascript</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule.embedded_javascript"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule.embedded_javascript" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a JavaScript string that will be embedded in the page.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.UIModule.javascript_files">
<tt class="descname">javascript_files</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule.javascript_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule.javascript_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of JavaScript files required by this module.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.UIModule.embedded_css">
<tt class="descname">embedded_css</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule.embedded_css"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule.embedded_css" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a CSS string that will be embedded in the page.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.UIModule.css_files">
<tt class="descname">css_files</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule.css_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule.css_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of CSS files required by this module.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.UIModule.html_head">
<tt class="descname">html_head</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule.html_head"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule.html_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a CSS string that will be put in the &lt;head/&gt; element</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.UIModule.html_body">
<tt class="descname">html_body</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule.html_body"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule.html_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an HTML string that will be put in the &lt;body/&gt; element</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.UIModule.render_string">
<tt class="descname">render_string</tt><big>(</big><em>path</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#UIModule.render_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.UIModule.render_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders a template and returns it as a string.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cyclone.web.ErrorHandler">
<em class="property">class </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">ErrorHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#ErrorHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.ErrorHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an error response with status_code for all requests.</p>
</dd></dl>

<dl class="class">
<dt id="cyclone.web.FallbackHandler">
<em class="property">class </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">FallbackHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#FallbackHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.FallbackHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>A RequestHandler that wraps another HTTP server callback.</p>
<p>Tornado has this to combine RequestHandlers and WSGI handlers, but it&#8217;s
not supported in cyclone and is just here for compatibily purposes.</p>
</dd></dl>

<dl class="class">
<dt id="cyclone.web.RedirectHandler">
<em class="property">class </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">RedirectHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#RedirectHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.RedirectHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Redirects the client to the given URL for all GET requests.</p>
<p>You should provide the keyword argument &#8220;url&#8221; to the handler, e.g.:</p>
<div class="highlight-none"><div class="highlight"><pre>application = web.Application([
    (r&quot;/oldpath&quot;, web.RedirectHandler, {&quot;url&quot;: &quot;/newpath&quot;}),
])
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="cyclone.web.StaticFileHandler">
<em class="property">class </em><tt class="descclassname">cyclone.web.</tt><tt class="descname">StaticFileHandler</tt><big>(</big><em>application</em>, <em>request</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#StaticFileHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.StaticFileHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple handler that can serve static content from a directory.</p>
<p>To map a path to this handler for a static data directory /var/www,
you would add a line to your application like:</p>
<div class="highlight-none"><div class="highlight"><pre>application = web.Application([
    (r&quot;/static/(.*)&quot;, web.StaticFileHandler, {&quot;path&quot;: &quot;/var/www&quot;}),
])
</pre></div>
</div>
<p>The local root directory of the content should be passed as the &#8220;path&#8221;
argument to the handler.</p>
<p>To support aggressive browser caching, if the argument &#8220;v&#8221; is given
with the path, we set an infinite HTTP expiration header. So, if you
want browsers to cache a file indefinitely, send them to, e.g.,
/static/images/myimage.png?v=xxx. Override <tt class="docutils literal"><span class="pre">get_cache_time</span></tt> method for
more fine-grained cache control.</p>
<dl class="method">
<dt id="cyclone.web.StaticFileHandler.set_extra_headers">
<tt class="descname">set_extra_headers</tt><big>(</big><em>path</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#StaticFileHandler.set_extra_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.StaticFileHandler.set_extra_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>For subclass to add extra headers to the response</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.StaticFileHandler.get_cache_time">
<tt class="descname">get_cache_time</tt><big>(</big><em>path</em>, <em>modified</em>, <em>mime_type</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#StaticFileHandler.get_cache_time"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.StaticFileHandler.get_cache_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Override to customize cache control behavior.</p>
<p>Return a positive number of seconds to trigger aggressive caching or 0
to mark resource as cacheable, only.</p>
<p>By default returns cache expiry of 10 years for resources requested
with &#8220;v&#8221; argument.</p>
</dd></dl>

<dl class="classmethod">
<dt id="cyclone.web.StaticFileHandler.make_static_url">
<em class="property">classmethod </em><tt class="descname">make_static_url</tt><big>(</big><em>settings</em>, <em>path</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#StaticFileHandler.make_static_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.StaticFileHandler.make_static_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a versioned url for the given path.</p>
<p>This method may be overridden in subclasses (but note that it is
a class method rather than an instance method).</p>
<p><tt class="docutils literal"><span class="pre">settings</span></tt> is the <a class="reference internal" href="#cyclone.web.Application.settings" title="cyclone.web.Application.settings"><tt class="xref py py-obj docutils literal"><span class="pre">Application.settings</span></tt></a> dictionary.  <tt class="docutils literal"><span class="pre">path</span></tt>
is the static path being requested.  The url returned should be
relative to the current host.</p>
</dd></dl>

<dl class="classmethod">
<dt id="cyclone.web.StaticFileHandler.get_version">
<em class="property">classmethod </em><tt class="descname">get_version</tt><big>(</big><em>settings</em>, <em>path</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#StaticFileHandler.get_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.StaticFileHandler.get_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the version string to be used in static URLs.</p>
<p>This method may be overridden in subclasses (but note that it
is a class method rather than a static method).  The default
implementation uses a hash of the file&#8217;s contents.</p>
<p><tt class="docutils literal"><span class="pre">settings</span></tt> is the <a class="reference internal" href="#cyclone.web.Application.settings" title="cyclone.web.Application.settings"><tt class="xref py py-obj docutils literal"><span class="pre">Application.settings</span></tt></a> dictionary and <tt class="docutils literal"><span class="pre">path</span></tt>
is the relative location of the requested asset on the filesystem.
The returned value should be a string, or <tt class="docutils literal"><span class="pre">None</span></tt> if no version
could be determined.</p>
</dd></dl>

<dl class="method">
<dt id="cyclone.web.StaticFileHandler.parse_url_path">
<tt class="descname">parse_url_path</tt><big>(</big><em>url_path</em><big>)</big><a class="reference internal" href="_modules/cyclone/web.html#StaticFileHandler.parse_url_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cyclone.web.StaticFileHandler.parse_url_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a static URL path into a filesystem path.</p>
<p><tt class="docutils literal"><span class="pre">url_path</span></tt> is the path component of the URL with
<tt class="docutils literal"><span class="pre">static_url_prefix</span></tt> removed.  The return value should be
filesystem path relative to <tt class="docutils literal"><span class="pre">static_path</span></tt>.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">cyclone.web</span></tt> &#8212; <tt class="docutils literal"><span class="pre">RequestHandler</span></tt> and <tt class="docutils literal"><span class="pre">Application</span></tt> classes</a><ul>
<li><a class="reference internal" href="#thread-safety-notes">Thread-safety notes</a></li>
<li><a class="reference internal" href="#request-handlers">Request handlers</a><ul>
<li><a class="reference internal" href="#entry-points">Entry points</a></li>
<li><a class="reference internal" href="#input">Input</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
<li><a class="reference internal" href="#cookies">Cookies</a></li>
<li><a class="reference internal" href="#other">Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#application-configuration">Application configuration</a></li>
<li><a class="reference internal" href="#decorators">Decorators</a></li>
<li><a class="reference internal" href="#everything-else">Everything else</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="webframework.html"
                        title="previous chapter">Core web framework</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="httpserver.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">cyclone.httpserver</span></tt> &#8212; Non-blocking HTTP server</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/web.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="httpserver.html" title="cyclone.httpserver — Non-blocking HTTP server"
             >next</a> |</li>
        <li class="right" >
          <a href="webframework.html" title="Core web framework"
             >previous</a> |</li>
        <li><a href="index.html">cyclone git-2013042301 documentation</a> &raquo;</li>
          <li><a href="webframework.html" >Core web framework</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Alexandre Fiori.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>